{% extends 'base.html' %}

{% block nombre_menu %}Gestión de automóviles{% endblock %}

{% block content %}
<link rel="stylesheet" href="/static/css/style.css">
<section class="py-2">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h2>Automóviles</h2>
                <table id="automoviles-table" class="table table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Modelo</th>
                            <th>Placas</th>
                            <th>Nombre del Propietario</th>
                            <th>Motivo de Ingreso</th>
                            <th>Fecha de ingreso</th>
                            <th>Notas</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for auto in automoviles %}
                        <tr>
                            <td>{{ auto[0] }}</td>
                            <td>{{ auto[1] }}</td>
                            <td>{{ auto[2] }}</td>
                            <td>{{ auto[3] }}</td>
                            <td>{{ auto[4] }}</td>
                            <td>{{ auto[5] }}</td>
                            <td>{{ auto[6] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="col-md-6">
                <h2>Detalles del Automóvil</h2>
                <table id="detalle-automovil" class="table">
                    <!-- Contenido de la tabla de detalles -->
                </table>
                <button id="actualizar-btn" class="btn btn-primary">Actualizar</button>
            </div>
        </div>
    </div>
</section>

<script>
    // Manejar clic en filas de la tabla de automóviles
    document.addEventListener("DOMContentLoaded", function() {
        var rows = document.querySelectorAll("#automoviles-table tbody tr");
        rows.forEach(function(row) {
            row.addEventListener("click", function() {
                // Obtener datos del automóvil seleccionado
                var id = row.cells[0].innerText;
                var modelo = row.cells[1].innerText;
                var placas = row.cells[2].innerText;
                var propietario = row.cells[3].innerText;
                var motivo = row.cells[4].innerText;
                var fecha = row.cells[5].innerText;
                var notas = row.cells[6].innerText;

                // Actualizar campos en la tabla de detalles
                document.getElementById("detalle-automovil").innerHTML = `
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Modelo</th>
                            <th>Placas</th>
                            <th>Nombre del Propietario</th>
                            <th>Motivo de Ingreso</th>
                            <th>Fecha de ingreso</th>
                            <th>Notas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${id}</td>
                            <td><input type="text" id="modelo" value="${modelo}"></td>
                            <td><input type="text" id="placas" value="${placas}"></td>
                            <td><input type="text" id="propietario" value="${propietario}"></td>
                            <td><input type="text" id="motivo" value="${motivo}"></td>
                            <td><input type="text" id="fecha" value="${fecha}"></td>
                            <td><input type="text" id="notas" value="${notas}"></td>
                        </tr>
                    </tbody>
                `;
            });
        });

        // Manejar clic en el botón de actualización
        document.getElementById("actualizar-btn").addEventListener("click", function() {
            // Obtener valores de los campos de entrada
            var modelo = document.getElementById("modelo").value;
            var placas = document.getElementById("placas").value;
            var propietario = document.getElementById("propietario").value;
            var motivo = document.getElementById("motivo").value;
            var fecha = document.getElementById("fecha").value;
            var notas = document.getElementById("notas").value;

            // Enviar los datos al servidor para actualizar la base de datos (usando Ajax con fetch o XMLHttpRequest)
        });
    });
</script>

{% endblock %}
